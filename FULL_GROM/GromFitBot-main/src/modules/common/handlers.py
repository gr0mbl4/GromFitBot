"""
–û–±—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –±–æ—Ç–∞
"""

from aiogram import Router, F
from aiogram.types import Message, ReplyKeyboardRemove
from aiogram.filters import Command

from src.core.database import Database
from src.modules.keyboards.main_keyboards import MainKeyboards

router = Router()
db = Database()

@router.message(F.text == "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é")
async def back_to_main_menu(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é' - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    telegram_id = message.from_user.id
    
    user = db.get_user(telegram_id)
    if not user:
        await message.answer("‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —Å –ø–æ–º–æ—â—å—é /start")
        return
    
    text = (
        "üè† <b>–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ GROMFIT</b>\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:\n\n"
        "‚Ä¢ üèãÔ∏è‚Äç‚ôÇÔ∏è <b>–ü–†–û–§–ò–õ–¨</b> - –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n"
        "‚Ä¢ ‚öîÔ∏è <b>–î–£–≠–õ–ò</b> - —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è\n"
        "‚Ä¢ üìä <b>–¢–†–ï–ù–ò–†–û–í–ö–ò</b> - –∑–∞–ø–∏—Å—å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\n"
        "‚Ä¢ üéØ <b>–î–û–°–¢–ò–ñ–ï–ù–ò–Ø</b> - –≤–∞—à–∏ –Ω–∞–≥—Ä–∞–¥—ã –∏ –∞—á–∏–≤–∫–∏\n"
        "‚Ä¢ üí∞ <b>–ú–ê–ì–ê–ó–ò–ù</b> - –ø–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ —Ç–æ–∫–µ–Ω—ã\n"
        "‚Ä¢ üë• <b>–†–ï–§–ï–†–ê–õ–´</b> - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π –∏ –±–æ–Ω—É—Å—ã\n"
        "‚Ä¢ üéÅ <b>–ï–ñ–ï–î–ù–ï–í–ù–´–ô –ë–û–ù–£–°</b> - –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞\n\n"
        "<i>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∏–∂–µ ‚Üì</i>"
    )
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞)
    await message.answer(text, reply_markup=MainKeyboards.get_main_menu())

@router.message(Command("menu"))
async def cmd_menu(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ /menu –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é"""
    telegram_id = message.from_user.id
    
    user = db.get_user(telegram_id)
    if not user:
        await message.answer("‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —Å –ø–æ–º–æ—â—å—é /start")
        return
    
    text = (
        "üè† <b>–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ GROMFIT</b>\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:\n\n"
        "‚Ä¢ üèãÔ∏è‚Äç‚ôÇÔ∏è <b>–ü–†–û–§–ò–õ–¨</b> - –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n"
        "‚Ä¢ ‚öîÔ∏è <b>–î–£–≠–õ–ò</b> - —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è\n"
        "‚Ä¢ üìä <b>–¢–†–ï–ù–ò–†–û–í–ö–ò</b> - –∑–∞–ø–∏—Å—å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\n"
        "‚Ä¢ üéØ <b>–î–û–°–¢–ò–ñ–ï–ù–ò–Ø</b> - –≤–∞—à–∏ –Ω–∞–≥—Ä–∞–¥—ã –∏ –∞—á–∏–≤–∫–∏\n"
        "‚Ä¢ üí∞ <b>–ú–ê–ì–ê–ó–ò–ù</b> - –ø–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ —Ç–æ–∫–µ–Ω—ã\n"
        "‚Ä¢ üë• <b>–†–ï–§–ï–†–ê–õ–´</b> - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π –∏ –±–æ–Ω—É—Å—ã\n"
        "‚Ä¢ üéÅ <b>–ï–ñ–ï–î–ù–ï–í–ù–´–ô –ë–û–ù–£–°</b> - –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞\n\n"
        "<i>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∏–∂–µ ‚Üì</i>"
    )
    
    await message.answer(text, reply_markup=MainKeyboards.get_main_menu())

@router.message(F.text == "‚¨ÖÔ∏è –ù–∞–∑–∞–¥")
async def back_button(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ù–∞–∑–∞–¥"""
    await back_to_main_menu(message)