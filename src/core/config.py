"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ GromFit
"""

import os
from pathlib import Path
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
env_path = Path(__file__).parent.parent.parent / '.env'
if env_path.exists():
    load_dotenv(env_path)
else:
    print("‚ö†Ô∏è –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.")

# ==================== –ö–õ–ê–°–° –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò ====================

class Config:
    """–ö–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞"""
    
    # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ - –±–µ—Ä–µ–º –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π
    BOT_TOKEN = os.getenv('BOT_TOKEN', '8170901723:AAFCJDYlQqvcKxiNVvQrM3n1R9snzWljeC8')
    
    # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –±–æ—Ç–∞ (telegram_id)
    ADMIN_IDS = [123456789, 987654321]  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ ID
    
    # –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    DB_PATH = Path(__file__).parent.parent.parent / 'data' / 'users.db'
    
    # –ë–æ–Ω—É—Å—ã –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
    REFERRER_BONUS = 25  # –ë–æ–Ω—É—Å –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–º—É
    REFERRED_BONUS = 50  # –ë–æ–Ω—É—Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–º—É
    
    # –†–∞–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
    REFERRAL_RANKS = {
        0: "–ù–æ–≤–∏—á–æ–∫",
        3: "–ë—Ä–æ–Ω–∑–∞",
        10: "–°–µ—Ä–µ–±—Ä–æ",
        25: "–ó–æ–ª–æ—Ç–æ",
        50: "–ü–ª–∞—Ç–∏–Ω–∞",
        100: "–õ–µ–≥–µ–Ω–¥–∞"
    }
    
    # –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å
    DAILY_BONUS_BASE = 10
    DAILY_BONUS_STREAK_MULTIPLIER = 2
    MAX_STREAK_BONUS = 50
    
    # –í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    TOTAL_ACHIEVEMENTS = 200
    
    # –í—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∞–π–º–∞—É—Ç–æ–≤
    REGISTRATION_TIMEOUT = 300  # 5 –º–∏–Ω—É—Ç
    SESSION_TIMEOUT = 1800  # 30 –º–∏–Ω—É—Ç
    
    # –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
    STARTING_BALANCE = 50.00
    STARTING_DIAMONDS = 0.00
    
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –Ω–∏–∫–Ω–µ–π–º–∞
    MAX_NICKNAME_LENGTH = 20
    MIN_NICKNAME_LENGTH = 3
    
    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
    DB_PATH.parent.mkdir(exist_ok=True)
    
    @classmethod
    def validate(cls):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
        errors = []
        
        # –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑—Ä–µ—à–∏–º —Ç–æ–∫–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        if not cls.BOT_TOKEN:
            errors.append("‚ùå BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        # –£–±—Ä–∞–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ç–æ–∫–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        
        if cls.STARTING_BALANCE <= 0:
            errors.append("‚ùå STARTING_BALANCE –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º")
        
        return errors

# ==================== –°–¢–ê–†–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) ====================

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
BOT_TOKEN = Config.BOT_TOKEN
ADMIN_IDS = Config.ADMIN_IDS
DB_PATH = Config.DB_PATH
REFERRER_BONUS = Config.REFERRER_BONUS
REFERRED_BONUS = Config.REFERRED_BONUS
REFERRAL_RANKS = Config.REFERRAL_RANKS
DAILY_BONUS_BASE = Config.DAILY_BONUS_BASE
DAILY_BONUS_STREAK_MULTIPLIER = Config.DAILY_BONUS_STREAK_MULTIPLIER
MAX_STREAK_BONUS = Config.MAX_STREAK_BONUS
TOTAL_ACHIEVEMENTS = Config.TOTAL_ACHIEVEMENTS
REGISTRATION_TIMEOUT = Config.REGISTRATION_TIMEOUT
SESSION_TIMEOUT = Config.SESSION_TIMEOUT
STARTING_BALANCE = Config.STARTING_BALANCE
STARTING_DIAMONDS = Config.STARTING_DIAMONDS
MAX_NICKNAME_LENGTH = Config.MAX_NICKNAME_LENGTH
MIN_NICKNAME_LENGTH = Config.MIN_NICKNAME_LENGTH

# ==================== –°–ü–ò–°–û–ö –†–ï–ì–ò–û–ù–û–í ====================

REGIONS = [
    "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–ö–∞–∑–∞–Ω—å",
    "–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥", "–ß–µ–ª—è–±–∏–Ω—Å–∫", "–°–∞–º–∞—Ä–∞", "–û–º—Å–∫", "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É",
    "–£—Ñ–∞", "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫", "–ü–µ—Ä–º—å", "–í–æ—Ä–æ–Ω–µ–∂", "–í–æ–ª–≥–æ–≥—Ä–∞–¥",
    "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", "–°–∞—Ä–∞—Ç–æ–≤", "–¢—é–º–µ–Ω—å", "–¢–æ–ª—å—è—Ç—Ç–∏", "–ò–∂–µ–≤—Å–∫",
    "–ë–∞—Ä–Ω–∞—É–ª", "–£–ª—å—è–Ω–æ–≤—Å–∫", "–ò—Ä–∫—É—Ç—Å–∫", "–•–∞–±–∞—Ä–æ–≤—Å–∫", "–Ø—Ä–æ—Å–ª–∞–≤–ª—å",
    "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫", "–ú–∞—Ö–∞—á–∫–∞–ª–∞", "–¢–æ–º—Å–∫", "–û—Ä–µ–Ω–±—É—Ä–≥", "–ö–µ–º–µ—Ä–æ–≤–æ",
    "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫", "–†—è–∑–∞–Ω—å", "–ê—Å—Ç—Ä–∞—Ö–∞–Ω—å", "–ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã", "–ü–µ–Ω–∑–∞",
    "–ö–∏—Ä–æ–≤", "–õ–∏–ø–µ—Ü–∫", "–ß–µ–±–æ–∫—Å–∞—Ä—ã", "–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥", "–¢—É–ª–∞",
    "–ö—É—Ä—Å–∫", "–°–æ—á–∏", "–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å", "–¢–≤–µ—Ä—å", "–ú–∞–≥–Ω–∏—Ç–æ–≥–æ—Ä—Å–∫",
    "–ë—Ä—è–Ω—Å–∫", "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å", "–ù–∏–∂–Ω–∏–π –¢–∞–≥–∏–ª", "–í–ª–∞–¥–∏–º–∏—Ä", "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫",
    "–°—É—Ä–≥—É—Ç", "–ß–∏—Ç–∞", "–ö–∞–ª—É–≥–∞", "–°–º–æ–ª–µ–Ω—Å–∫", "–í–æ–ª–∂—Å–∫–∏–π",
    "–°–∞—Ä–∞–Ω—Å–∫", "–ß–µ—Ä–µ–ø–æ–≤–µ—Ü", "–í–æ–ª–æ–≥–¥–∞", "–ö—É—Ä–≥–∞–Ω", "–û—Ä—ë–ª",
    "–ü–æ–¥–æ–ª—å—Å–∫", "–ì—Ä–æ–∑–Ω—ã–π", "–ú—É—Ä–º–∞–Ω—Å–∫", "–¢–∞–º–±–æ–≤", "–ü–µ—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫",
    "–ù–∏–∂–Ω–µ–≤–∞—Ä—Ç–æ–≤—Å–∫", "–ö–æ—Å—Ç—Ä–æ–º–∞", "–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫", "–ô–æ—à–∫–∞—Ä-–û–ª–∞", "–•–∏–º–∫–∏",
    "–¢–∞–≥–∞–Ω—Ä–æ–≥", "–°—ã–∫—Ç—ã–≤–∫–∞—Ä", "–ù–∞–ª—å—á–∏–∫", "–®–∞—Ö—Ç—ã", "–î–∑–µ—Ä–∂–∏–Ω—Å–∫",
    "–û—Ä—Å–∫", "–ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫", "–≠–Ω–≥–µ–ª—å—Å", "–ê–Ω–≥–∞—Ä—Å–∫", "–ö–æ—Ä–æ–ª—ë–≤",
    "–ü—Å–∫–æ–≤", "–õ—é–±–µ—Ä—Ü—ã", "–ë–∏–π—Å–∫", "–ú—ã—Ç–∏—â–∏", "–ü—Ä–æ–∫–æ–ø—å–µ–≤—Å–∫",
    "–ë–∞–ª–∞–∫–æ–≤–æ", "–†—ã–±–∏–Ω—Å–∫", "–ê—Ä–º–∞–≤–∏—Ä", "–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫", "–°–µ–≤–µ—Ä–æ–¥–≤–∏–Ω—Å–∫",
    "–ê–±–∞–∫–∞–Ω", "–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π", "–ù–æ—Ä–∏–ª—å—Å–∫", "–°—ã–∑—Ä–∞–Ω—å", "–í–µ–ª–∏–∫–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥",
    "–ö–∞–º–µ–Ω—Å–∫-–£—Ä–∞–ª—å—Å–∫–∏–π", "–ó–ª–∞—Ç–æ—É—Å—Ç", "–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫", "–ö—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫", "–£—Å—Å—É—Ä–∏–π—Å–∫",
    "–í–æ–ª–≥–æ–¥–æ–Ω—Å–∫", "–ù–∞—Ö–æ–¥–∫–∞", "–ë–µ—Ä–µ–∑–Ω–∏–∫–∏", "–°–∞–ª–∞–≤–∞—Ç", "–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–ª—å",
    "–ú–∏–∞—Å—Å", "–ö–µ—Ä—á—å", "–ù–æ–≤–æ—á–µ—Ä–∫–∞—Å—Å–∫", "–ü–µ—Ä–≤–æ—É—Ä–∞–ª—å—Å–∫", "–†—É–±—Ü–æ–≤—Å–∫",
    "–ê—á–∏–Ω—Å–∫", "–ö–æ–≤—Ä–æ–≤", "–ú–∞–π–∫–æ–ø", "–ë–∞–ª–∞—à–∏—Ö–∞", "–•–∞—Å–∞–≤—é—Ä—Ç",
    "–°—Ç–∞—Ä—ã–π –û—Å–∫–æ–ª", "–°–µ—Ä–ø—É—Ö–æ–≤", "–£–ª–∞–Ω-–£–¥—ç", "–ñ–µ–ª–µ–∑–Ω–æ–≥–æ—Ä—Å–∫", "–ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
    "–ù–∞–∑—Ä–∞–Ω—å", "–ù–æ–≤–æ—á–µ–±–æ–∫—Å–∞—Ä—Å–∫", "–ü—É—à–∫–∏–Ω–æ", "–ê—Ä–∑–∞–º–∞—Å", "–î–æ–º–æ–¥–µ–¥–æ–≤–æ",
    "–ö–∞—Å–ø–∏–π—Å–∫", "–ù–æ–≤—ã–π –£—Ä–µ–Ω–≥–æ–π", "–û–±–Ω–∏–Ω—Å–∫", "–û–∫—Ç—è–±—Ä—å—Å–∫–∏–π", "–†–µ—É—Ç–æ–≤",
    "–ù–µ—Ñ—Ç–µ–∫–∞–º—Å–∫", "–î–µ—Ä–±–µ–Ω—Ç", "–ö–∏—Å–ª–æ–≤–æ–¥—Å–∫", "–ù–µ–≤–∏–Ω–Ω–æ–º—ã—Å—Å–∫", "–ü–µ—Ä–≤–æ—Ä–µ—á–µ–Ω—Å–∫",
    "–©—ë–ª–∫–æ–≤–æ", "–†–∞–º–µ–Ω—Å–∫–æ–µ", "–î–æ–ª–≥–æ–ø—Ä—É–¥–Ω—ã–π", "–ñ—É–∫–æ–≤—Å–∫–∏–π", "–ö–æ–ø–µ–π—Å–∫",
    "–ü—è—Ç–∏–≥–æ—Ä—Å–∫", "–ö–æ–ª–æ–º–Ω–∞", "–ö–æ—Ä–æ–ª—ë–≤", "–û–¥–∏–Ω—Ü–æ–≤–æ", "–•–∏–º–∫–∏",
    "–ú—ã—Ç–∏—â–∏", "–õ—é–±–µ—Ä—Ü—ã", "–†–µ—É—Ç–æ–≤", "–ë–∞–ª–∞—à–∏—Ö–∞", "–í–∏–¥–Ω–æ–µ",
    "–î–æ–º–æ–¥–µ–¥–æ–≤–æ", "–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π", "–ö—Ä–∞—Å–Ω–æ–∑–Ω–∞–º–µ–Ω—Å–∫", "–õ–æ–±–Ω—è", "–û—Ä–µ—Ö–æ–≤–æ-–ó—É–µ–≤–æ"
]

# ==================== –ù–ê–°–¢–†–û–ô–ö–ò –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø ====================

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤
LOGS_DIR = Path(__file__).parent.parent.parent / 'logs'
LOGS_DIR.mkdir(exist_ok=True)

LOGGING_CONFIG = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'standard': {
            'format': '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        },
        'detailed': {
            'format': '%(asctime)s - %(name)s - %(levelname)s - [%(filename)s:%(lineno)d] - %(message)s'
        }
    },
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
            'level': 'INFO',
            'formatter': 'standard',
            'stream': 'ext://sys.stdout'
        },
        'file': {
            'class': 'logging.handlers.RotatingFileHandler',
            'level': 'INFO',
            'formatter': 'detailed',
            'filename': LOGS_DIR / 'bot.log',
            'maxBytes': 10485760,  # 10 MB
            'backupCount': 5,
            'encoding': 'utf8'
        },
        'error_file': {
            'class': 'logging.handlers.RotatingFileHandler',
            'level': 'ERROR',
            'formatter': 'detailed',
            'filename': LOGS_DIR / 'errors.log',
            'maxBytes': 10485760,  # 10 MB
            'backupCount': 5,
            'encoding': 'utf8'
        }
    },
    'loggers': {
        '': {  # –ö–æ—Ä–Ω–µ–≤–æ–π –ª–æ–≥–≥–µ—Ä
            'handlers': ['console', 'file', 'error_file'],
            'level': 'INFO',
            'propagate': True
        },
        'src': {
            'handlers': ['file', 'error_file'],
            'level': 'INFO',
            'propagate': False
        }
    }
}

# ==================== –ù–ê–°–¢–†–û–ô–ö–ò –ú–ê–ì–ê–ó–ò–ù–ê ====================

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
SHOP_CATEGORIES = {
    'boosts': 'üí™ –ë—É—Å—Ç—ã –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫',
    'styles': 'üé® –°—Ç–∏–ª–∏ –∏ —Ç–µ–º—ã',
    'premium': '‚ö° –ü—Ä–µ–º–∏—É–º-—Å—Ç–∞—Ç—É—Å',
    'gifts': 'üéÅ –ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –Ω–∞–±–æ—Ä—ã'
}

# ==================== –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê ====================

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
if __name__ != "__main__":
    config_errors = Config.validate()
    if config_errors:
        print("‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:")
        for error in config_errors:
            print(f"  {error}")